"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[657],{7657:(G,u,a)=>{a.r(u),a.d(u,{FFCodesModule:()=>Q});var c=a(6814),g=a(7304),e=a(5879),v=a(7112),h=a(4468),x=a(431),r=a(6223),C=a(8704),m=a(1274),f=a(5722);const b=["noticeSwal"];function Z(i,l){1&i&&(e.TgZ(0,"div"),e._uU(1,"Name is required"),e.qZA())}function T(i,l){1&i&&(e.TgZ(0,"div"),e._uU(1,"Name must be at least 4 characters long"),e.qZA())}function M(i,l){if(1&i&&(e.TgZ(0,"div",50),e.YNc(1,Z,2,0,"div",51),e.YNc(2,T,2,0,"div",51),e.qZA()),2&i){e.oxw();const t=e.MAs(26);e.xp6(1),e.Q6J("ngIf",null==t.errors?null:t.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.errors?null:t.errors.minlength)}}function A(i,l){1&i&&(e.TgZ(0,"div"),e._uU(1,"Email is required"),e.qZA())}function F(i,l){1&i&&(e.TgZ(0,"div"),e._uU(1,"Email is not valid"),e.qZA())}function y(i,l){if(1&i&&(e.TgZ(0,"div",50),e.YNc(1,A,2,0,"div",51),e.YNc(2,F,2,0,"div",51),e.qZA()),2&i){e.oxw();const t=e.MAs(35);e.xp6(1),e.Q6J("ngIf",null==t.errors?null:t.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.errors?null:t.errors.pattern)}}function U(i,l){1&i&&e._UZ(0,"div",60)}function w(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",52)(2,"div",53)(3,"input",54,55),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw(2);return e.KtG(s.userModel.role=n)}),e.qZA(),e.TgZ(5,"label",56)(6,"div",57),e._uU(7),e.ALo(8,"titlecase"),e.qZA(),e.TgZ(9,"div",58),e._uU(10),e.qZA()()()(),e.YNc(11,U,1,0,"div",59),e.qZA()}if(2&i){const t=l.$implicit,o=l.last,n=e.oxw(2);e.xp6(3),e.MGl("id","kt_modal_update_role_option_",t.id,""),e.Q6J("ngModel",n.userModel.role)("value",t.name)("checked",o),e.xp6(2),e.MGl("for","kt_modal_update_role_option_",t.id,""),e.xp6(2),e.hij(" ",e.lcZ(8,8,t.name)," "),e.xp6(3),e.hij(" ",t.name," "),e.xp6(1),e.Q6J("ngIf",!o)}}const E=function(i){return{"ki-up":i}};function k(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"form",14,15),e.NdJ("ngSubmit",function(n){e.CHM(t);const s=e.MAs(1),d=e.oxw();return e.KtG(d.onSubmit(n,s))}),e.TgZ(2,"div",16)(3,"h4",17),e._uU(4,"User Details"),e.qZA(),e.TgZ(5,"button",18),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.KtG(s.dismiss("Cross click"))}),e.qZA()(),e.TgZ(6,"div",19)(7,"div",20)(8,"div",21),e._UZ(9,"app-keenicon",22),e.TgZ(10,"div",23)(11,"div",24)(12,"div",25),e._uU(13,"Updating customer details will receive a privacy audit. For more info, please read our "),e.TgZ(14,"a",26),e._uU(15,"Privacy Policy"),e.qZA()()()()(),e.TgZ(16,"div",27),e.NdJ("click",function(){e.CHM(t);const n=e.MAs(21);return e.KtG(n.toggle())}),e._uU(17,"User Information "),e.TgZ(18,"span",28),e._UZ(19,"i",29),e.qZA()(),e.TgZ(20,"div",30,31),e.NdJ("ngbCollapseChange",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.isCollapsed1=n)}),e.TgZ(22,"div",32)(23,"label",33),e._uU(24,"Name"),e.qZA(),e.TgZ(25,"input",34,35),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.userModel.name=n)}),e.qZA(),e.YNc(27,M,3,2,"div",36),e.qZA(),e.TgZ(28,"div",32)(29,"label",33)(30,"span"),e._uU(31,"Email"),e.qZA(),e.TgZ(32,"span",37),e._UZ(33,"app-keenicon",38),e.qZA()(),e.TgZ(34,"input",39,40),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.userModel.email=n)}),e.qZA(),e.YNc(36,y,3,2,"div",36),e.qZA(),e.TgZ(37,"div",41)(38,"label",42),e._uU(39,"Role"),e.qZA(),e.YNc(40,w,12,10,"div",43),e.ALo(41,"async"),e.qZA()()()(),e.TgZ(42,"div",44)(43,"button",45),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.KtG(s.dismiss("cancel"))}),e._uU(44," Discard "),e.qZA(),e.TgZ(45,"button",46)(46,"span",47),e._uU(47," Submit "),e.qZA(),e.TgZ(48,"span",48),e._uU(49," Please wait... "),e._UZ(50,"span",49),e.qZA()()()()}if(2&i){const t=e.MAs(1),o=e.oxw();let n;e.xp6(16),e.uIk("aria-expanded",!o.isCollapsed1),e.xp6(3),e.Q6J("ngClass",e.VKq(11,E,!o.isCollapsed1)),e.xp6(1),e.Q6J("ngbCollapse",o.isCollapsed1),e.xp6(5),e.Q6J("ngModel",o.userModel.name),e.xp6(2),e.Q6J("ngIf",t.submitted&&t.invalid),e.xp6(7),e.Q6J("ngModel",o.userModel.email),e.xp6(2),e.Q6J("ngIf",t.submitted&&t.invalid),e.xp6(4),e.Q6J("ngForOf",null==(n=e.lcZ(41,9,o.roles$))?null:n.data),e.xp6(5),e.uIk("data-kt-indicator",o.isLoading?"on":"off")}}let J=(()=>{class i{apiService;roleService;cdr;isCollapsed1=!1;isCollapsed2=!0;isLoading=!1;users;datatableConfig={};reloadEvent=new e.vpe;aUser;userModel={id:0,name:"",email:"",role:""};noticeSwal;swalOptions={};roles$;constructor(t,o,n){this.apiService=t,this.roleService=o,this.cdr=n}ngAfterViewInit(){}ngOnInit(){this.datatableConfig={serverSide:!0,stripeClasses:["odd-row","even-row"],scrollY:"calc(100vh - 200px)",scrollX:!0,ajax:(o,n)=>{this.apiService.getFFcodes(o).subscribe(s=>{n(s)})},columns:[{title:"EMPLOYEECODE",data:"EMPLOYEECODE"},{title:"Employee Name",data:"Employee Name"},{title:"Department",data:"Department"},{title:"ffcode",data:"ffcode"},{title:"positioncode",data:"positioncode"},{title:"msr",data:"msr"}],createdRow:function(o,n,s){$("td:eq(0)",o).addClass("d-flex align-items-center")}}}delete(t){this.apiService.deleteUser(t).subscribe(()=>{this.reloadEvent.emit(!0)})}edit(t){this.aUser=this.apiService.getUser(t),this.aUser.subscribe(o=>{this.userModel=o})}create(){this.userModel={id:0,name:"",email:""}}onSubmit(t,o){if(o&&o.invalid)return;this.isLoading=!0;const n={icon:"success",title:"Success!",text:this.userModel.id>0?"User updated successfully!":"User created successfully!"},s={icon:"error",title:"Error!",text:""},d=()=>{this.isLoading=!1};this.userModel.id>0?(()=>{this.apiService.updateUser(this.userModel.id,this.userModel).subscribe({next:()=>{this.showAlert(n),this.reloadEvent.emit(!0)},error:p=>{s.text=this.extractText(p.error),this.showAlert(s),this.isLoading=!1},complete:d})})():(()=>{this.userModel.password="test123",this.apiService.createUser(this.userModel).subscribe({next:()=>{this.showAlert(n),this.reloadEvent.emit(!0)},error:p=>{s.text=this.extractText(p.error),this.showAlert(s),this.isLoading=!1},complete:d})})()}extractText(t){var o=[];for(var n in t)"string"==typeof t[n]?o.push(t[n]):"object"==typeof t[n]&&(o=o.concat(this.extractText(t[n])));return Array.from(new Set(o)).join("\n")}showAlert(t){let o=t.icon?.toString()||"success";"error"===t.icon&&(o="danger"),this.swalOptions=Object.assign({buttonsStyling:!1,confirmButtonText:"Ok, got it!",customClass:{confirmButton:"btn btn-"+o}},t),this.cdr.detectChanges(),this.noticeSwal.fire()}ngOnDestroy(){this.reloadEvent.unsubscribe()}static \u0275fac=function(o){return new(o||i)(e.Y36(v.K),e.Y36(h.N),e.Y36(e.sBO))};static \u0275cmp=e.Xpm({type:i,selectors:[["app-ffcodes"]],viewQuery:function(o,n){if(1&o&&e.Gf(b,5),2&o){let s;e.iGM(s=e.CRH())&&(n.noticeSwal=s.first)}},decls:16,vars:4,consts:[[1,"card"],[1,"card-header","border-0","pt-6"],[1,"card-title"],[1,"d-flex","align-items-center","position-relative","my-1"],["name","magnifier",1,"fs-3","position-absolute","ms-5"],["type","text","data-action","filter","placeholder","Search Users",1,"form-control","form-control-solid","w-250px","ps-12"],[1,"card-toolbar"],[1,"d-flex","justify-content-end"],["type","button","data-action","create",1,"btn","btn-primary"],[1,"card-body","pt-0"],["route","/apps/users",3,"datatableConfig","reload","modal","deleteEvent","editEvent","createEvent"],[3,"swalOptions"],["noticeSwal",""],["formModal",""],[3,"ngSubmit"],["myForm","ngForm"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],["id","kt_modal_update_customer_scroll","data-kt-scroll","true","data-kt-scroll-activate","{default: false, lg: true}","data-kt-scroll-max-height","auto","data-kt-scroll-dependencies","#kt_modal_update_customer_header","data-kt-scroll-wrappers","#kt_modal_update_customer_scroll","data-kt-scroll-offset","300px",1,"d-flex","flex-column","scroll-y","me-n7","pe-7","mw-650px"],[1,"notice","d-flex","bg-light-primary","rounded","border-primary","border","border-dashed","mb-9","p-6"],["name","information",1,"fs-2tx","text-primary","me-4"],[1,"d-flex","flex-stack","flex-grow-1"],[1,"fw-semibold"],[1,"fs-6","text-gray-700"],["href","#"],["data-bs-toggle","collapse","role","button","aria-controls","kt_modal_update_customer_user_info",1,"fw-bold","fs-3","rotate","collapsible","mb-7",3,"click"],[1,"ms-2","rotate-180"],[1,"ki-duotone","ki-down","fs-3",3,"ngClass"],[1,"collapse","show",3,"ngbCollapse","ngbCollapseChange"],["collapse1","ngbCollapse"],[1,"fv-row","mb-7"],[1,"required","fw-semibold","fs-6","mb-2"],["type","text","name","name","required","","minlength","4",1,"form-control","form-control-solid",3,"ngModel","ngModelChange"],["name","ngModel"],["class","fv-plugins-message-container fv-plugins-message-container--enabled invalid-feedback",4,"ngIf"],["placement","end","ngbTooltip","Email address must be active",1,"ms-1"],["name","information",1,"fs-7"],["type","email","name","email","required","","pattern","[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$",1,"form-control","form-control-solid",3,"ngModel","ngModelChange"],["email","ngModel"],[1,"mb-7"],[1,"required","fw-semibold","fs-6","mb-5"],[4,"ngFor","ngForOf"],[1,"modal-footer","flex-center"],["type","reset","id","kt_modal_update_customer_cancel",1,"btn","btn-light","me-3",3,"click"],["type","submit","id","kt_modal_update_customer_submit",1,"btn","btn-primary"],[1,"indicator-label"],[1,"indicator-progress"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"],[1,"fv-plugins-message-container","fv-plugins-message-container--enabled","invalid-feedback"],[4,"ngIf"],[1,"d-flex","fv-row"],[1,"form-check","form-check-custom","form-check-solid"],["name","role","type","radio",1,"form-check-input","me-3",3,"id","ngModel","value","checked","ngModelChange"],["role","ngModel"],[1,"form-check-label",3,"for"],[1,"fw-bold","text-gray-800"],[1,"text-gray-600"],["class","separator separator-dashed my-5",4,"ngIf"],[1,"separator","separator-dashed","my-5"]],template:function(o,n){if(1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._UZ(4,"app-keenicon",4)(5,"input",5),e.qZA()(),e.TgZ(6,"div",6)(7,"div",7)(8,"button",8),e._uU(9," Add User "),e.qZA()()()(),e.TgZ(10,"div",9)(11,"app-crud",10),e.NdJ("deleteEvent",function(d){return n.delete(d)})("editEvent",function(d){return n.edit(d)})("createEvent",function(){return n.create()}),e.qZA()()(),e._UZ(12,"swal",11,12),e.YNc(14,k,51,13,"ng-template",null,13,e.W1O)),2&o){const s=e.MAs(15);e.xp6(11),e.Q6J("datatableConfig",n.datatableConfig)("reload",n.reloadEvent)("modal",s),e.xp6(1),e.Q6J("swalOptions",n.swalOptions)}},dependencies:[c.mk,c.sg,c.O5,x.D,r._Y,r.Fj,r._,r.JJ,r.JL,r.Q7,r.wO,r.c5,r.On,r.F,C.q,m._D,m._L,f.q1,c.Ov,c.rS],encapsulation:2})}return i})();var _=a(2595),S=a(627),q=a(6832),N=a(9155),O=a(4955);let Q=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275mod=e.oAB({type:i});static \u0275inj=e.cJS({imports:[c.ez,N.Z,r.u5,r.UX,O.m,q.p,m.Oz,m.XC,m.lQ,m.HK,f.ii.forChild(),g.Bz.forChild([{path:"",component:J}]),_.HB,S.T,_._9]})}return i})()}}]);